version: '3.4'

services:
  app:
    deploy:
      labels:
        # traefik common
        - "traefik.enable=true"
        - "traefik.docker.network=traefik-public"

        # traefikv2
        - "traefik.http.routers.siga-http.entrypoints=web"
        - "traefik.http.routers.siga-http.rule=Host(`cloud.brunocasas.com`)"
        - "traefik.http.routers.siga-http.middlewares=redirect-to-https"

        - "traefik.http.routers.siga.entrypoints=websecure"
        - "traefik.http.routers.siga.rule=Host(`${SIGA_HOST:?Host do siga n√£o foi definido em ACME_EMAIL}`)"
        - "traefik.http.routers.siga.tls=true"
        - "traefik.http.routers.siga.tls.certresolver=myresolver"
